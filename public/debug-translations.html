<!DOCTYPE html>
<html>
  <head>
    <title>Debug Traductions</title>
    <meta charset="utf-8" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .debug-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
      }
      .status.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .status.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .status.warning {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }
    </style>
  </head>
  <body>
    <h1>üêõ Debug des Traductions</h1>

    <div class="debug-section">
      <h2>√âtat des Traductions</h2>
      <div id="translations-status" class="status warning">
        V√©rification en cours...
      </div>
      <div id="translations-details"></div>
    </div>

    <div class="debug-section">
      <h2>Test de Traduction</h2>
      <button onclick="testTranslation('fr')">üá´üá∑ Fran√ßais</button>
      <button onclick="testTranslation('en')">üá¨üáß English</button>
      <button onclick="testTranslation('de')">üá©üá™ Deutsch</button>
      <div id="translation-test-result"></div>
    </div>

    <div class="debug-section">
      <h2>Console Logs</h2>
      <div
        id="console-logs"
        style="
          background: #f8f9fa;
          padding: 10px;
          border-radius: 5px;
          font-family: monospace;
          max-height: 300px;
          overflow-y: auto;
        "
      ></div>
    </div>

    <script src="assets/js/translations.js"></script>
    <script>
      // Intercepter les console.log pour les afficher sur la page
      const originalLog = console.log
      const originalError = console.error
      const originalWarn = console.warn

      function addLog(type, message) {
        const logsDiv = document.getElementById('console-logs')
        const timestamp = new Date().toLocaleTimeString()
        const logEntry = document.createElement('div')
        logEntry.style.color =
          type === 'error' ? '#dc3545' : type === 'warn' ? '#ffc107' : '#28a745'
        logEntry.textContent = `[${timestamp}] ${type.toUpperCase()}: ${message}`
        logsDiv.appendChild(logEntry)
        logsDiv.scrollTop = logsDiv.scrollHeight
      }

      console.log = function (...args) {
        originalLog.apply(console, args)
        addLog('log', args.join(' '))
      }

      console.error = function (...args) {
        originalError.apply(console, args)
        addLog('error', args.join(' '))
      }

      console.warn = function (...args) {
        originalWarn.apply(console, args)
        addLog('warn', args.join(' '))
      }

      // V√©rifier l'√©tat des traductions
      function checkTranslations() {
        const statusDiv = document.getElementById('translations-status')
        const detailsDiv = document.getElementById('translations-details')

        if (window.translations) {
          statusDiv.className = 'status success'
          statusDiv.textContent = '‚úÖ Traductions charg√©es avec succ√®s'

          const languages = Object.keys(window.translations)
          const pages = Object.keys(window.translations.fr || {})

          detailsDiv.innerHTML = `
                    <p><strong>Langues disponibles:</strong> ${languages.join(
                      ', '
                    )}</p>
                    <p><strong>Pages disponibles:</strong> ${pages.join(
                      ', '
                    )}</p>
                    <p><strong>Payer-solde disponible:</strong> ${
                      window.translations.fr &&
                      window.translations.fr['payer-solde']
                        ? '‚úÖ Oui'
                        : '‚ùå Non'
                    }</p>
                `
        } else {
          statusDiv.className = 'status error'
          statusDiv.textContent = '‚ùå Traductions non charg√©es'
          detailsDiv.innerHTML =
            "<p>Le fichier translations.js n'a pas √©t√© charg√© correctement.</p>"
        }
      }

      // Test de traduction
      function testTranslation(lang) {
        const resultDiv = document.getElementById('translation-test-result')

        if (!window.translations || !window.translations[lang]) {
          resultDiv.innerHTML = `<div class="status error">‚ùå Traductions non disponibles pour ${lang}</div>`
          return
        }

        try {
          const t = window.translations[lang]['payer-solde']
          if (!t) {
            resultDiv.innerHTML = `<div class="status error">‚ùå Page payer-solde non trouv√©e pour ${lang}</div>`
            return
          }

          resultDiv.innerHTML = `
                    <div class="status success">‚úÖ Traduction ${lang} r√©ussie</div>
                    <p><strong>Titre:</strong> ${t.title}</p>
                    <p><strong>Banni√®re:</strong> ${t.banner.title} ${t.banner.subtitle}</p>
                    <p><strong>Paiement:</strong> ${t.payment.title}</p>
                `
        } catch (error) {
          resultDiv.innerHTML = `<div class="status error">‚ùå Erreur lors de la traduction: ${error.message}</div>`
        }
      }

      // V√©rifier au chargement
      document.addEventListener('DOMContentLoaded', function () {
        console.log('üöÄ Page de debug charg√©e')
        checkTranslations()
      })

      // √âcouter l'√©v√©nement translations:ready
      window.addEventListener('translations:ready', function (event) {
        console.log('üéâ √âv√©nement translations:ready re√ßu:', event.detail)
        checkTranslations()
      })

      // Fallback apr√®s 2 secondes
      setTimeout(() => {
        console.log('‚è∞ Fallback apr√®s 2 secondes')
        checkTranslations()
      }, 2000)
    </script>
  </body>
</html>
