<!DOCTYPE html>
<html>
  <head>
    <title>Test Traduction Payer Solde</title>
    <meta charset="utf-8" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      .language-buttons {
        margin: 20px 0;
      }
      .language-buttons button {
        margin: 5px;
        padding: 10px 15px;
        cursor: pointer;
      }
      .current-lang {
        background: #e0e0e0;
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
      }
      .translation-test {
        background: #f5f5f5;
        padding: 15px;
        margin: 10px 0;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h1>🧪 Test de Traduction - Payer Solde</h1>

    <div class="current-lang">
      <strong>Langue actuelle :</strong>
      <span id="current-lang">Chargement...</span>
    </div>

    <div class="language-buttons">
      <button onclick="testTranslation('fr')">🇫🇷 Français</button>
      <button onclick="testTranslation('en')">🇬🇧 English</button>
      <button onclick="testTranslation('de')">🇩🇪 Deutsch</button>
    </div>

    <div class="test-section">
      <h2>Test des traductions de la section de paiement</h2>

      <div class="translation-test">
        <h3>Bannière</h3>
        <p><strong>Titre :</strong> <span id="banner-title">-</span></p>
        <p><strong>Sous-titre :</strong> <span id="banner-subtitle">-</span></p>
        <p>
          <strong>Description :</strong> <span id="banner-description">-</span>
        </p>
        <p><strong>Bouton :</strong> <span id="banner-button">-</span></p>
      </div>

      <div class="translation-test">
        <h3>Section Paiement</h3>
        <p><strong>Titre :</strong> <span id="payment-title">-</span></p>
        <p>
          <strong>Description :</strong> <span id="payment-description">-</span>
        </p>
        <p>
          <strong>Récapitulatif :</strong>
          <span id="payment-summary-title">-</span>
        </p>
        <p><strong>Total :</strong> <span id="payment-total-label">-</span></p>
        <p>
          <strong>Acompte :</strong> <span id="payment-deposit-label">-</span>
        </p>
        <p>
          <strong>Solde restant :</strong>
          <span id="payment-remaining-label">-</span>
        </p>
        <p><strong>Carte :</strong> <span id="card-label">-</span></p>
        <p><strong>Bouton :</strong> <span id="submit-button-text">-</span></p>
        <p>
          <strong>Disclaimer :</strong> <span id="payment-disclaimer">-</span>
        </p>
      </div>

      <div class="translation-test">
        <h3>Messages d'erreur</h3>
        <p>
          <strong>Token manquant :</strong>
          <span id="error-missing-token">-</span>
        </p>
        <p>
          <strong>Erreur de chargement :</strong>
          <span id="error-loading">-</span>
        </p>
        <p>
          <strong>Réservation introuvable :</strong>
          <span id="error-not-found">-</span>
        </p>
        <p>
          <strong>Erreur création paiement :</strong>
          <span id="error-payment-creation">-</span>
        </p>
      </div>

      <div class="translation-test">
        <h3>Messages de verrouillage</h3>
        <p>
          <strong>Solde déjà payé :</strong>
          <span id="lock-balance-paid">-</span>
        </p>
        <p>
          <strong>Réservation annulée :</strong>
          <span id="lock-reservation-canceled">-</span>
        </p>
      </div>

      <div class="translation-test">
        <h3>États du bouton</h3>
        <p>
          <strong>Création paiement :</strong>
          <span id="status-creating">-</span>
        </p>
        <p>
          <strong>Confirmation :</strong> <span id="status-confirming">-</span>
        </p>
        <p><strong>Confirmé :</strong> <span id="status-confirmed">-</span></p>
      </div>
    </div>

    <script src="assets/js/translations.js"></script>
    <script>
      let currentLang = 'fr'

      // Fonction de test de traduction
      function testTranslation(lang) {
        if (!window.translations || !window.translations[lang]) {
          alert('Traductions non disponibles pour la langue ' + lang)
          return
        }

        currentLang = lang
        const t = window.translations[lang]['payer-solde']

        // Mettre à jour l'affichage de la langue actuelle
        document.getElementById('current-lang').textContent = lang.toUpperCase()

        // Tester la bannière
        document.getElementById('banner-title').textContent = t.banner.title
        document.getElementById('banner-subtitle').textContent =
          t.banner.subtitle
        document.getElementById('banner-description').textContent =
          t.banner.description
        document.getElementById('banner-button').textContent = t.banner.button

        // Tester la section paiement
        document.getElementById('payment-title').textContent = t.payment.title
        document.getElementById('payment-description').textContent =
          t.payment.description
        document.getElementById('payment-summary-title').textContent =
          t.payment.summary_title
        document.getElementById('payment-total-label').textContent =
          t.payment.total
        document.getElementById('payment-deposit-label').textContent =
          t.payment.deposit_paid.replace('{percent}', '10')
        document.getElementById('payment-remaining-label').textContent =
          t.payment.remaining
        document.getElementById('card-label').textContent = t.payment.card_label
        document.getElementById('submit-button-text').textContent =
          t.payment.submit_button
        document.getElementById('payment-disclaimer').textContent =
          t.payment.disclaimer

        // Tester les messages d'erreur
        document.getElementById('error-missing-token').textContent =
          t.errors.missing_token
        document.getElementById('error-loading').textContent =
          t.errors.loading_error
        document.getElementById('error-not-found').textContent =
          t.errors.reservation_not_found
        document.getElementById('error-payment-creation').textContent =
          t.errors.payment_creation_error

        // Tester les messages de verrouillage
        document.getElementById('lock-balance-paid').textContent =
          t.locks.balance_paid
        document.getElementById('lock-reservation-canceled').textContent =
          t.locks.reservation_canceled

        // Tester les états du bouton
        document.getElementById('status-creating').textContent =
          t.payment.creating_payment
        document.getElementById('status-confirming').textContent =
          t.payment.confirming
        document.getElementById('status-confirmed').textContent =
          t.payment.confirmed

        console.log('✅ Traduction appliquée pour la langue:', lang)
        console.log('📋 Données de traduction:', t)
      }

      // Initialiser au chargement
      window.addEventListener('translations:ready', function (event) {
        const detectedLang = event.detail.language
        console.log('🌍 Traductions prêtes, langue détectée:', detectedLang)
        testTranslation(detectedLang)
      })

      // Fallback si l'événement n'est pas déclenché
      setTimeout(() => {
        if (window.translations) {
          console.log('⏰ Fallback: traductions disponibles, test en français')
          testTranslation('fr')
        } else {
          console.log('❌ Traductions non disponibles')
        }
      }, 1000)
    </script>
  </body>
</html>
