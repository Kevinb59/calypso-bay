<!DOCTYPE html>
<html>
  <head>
    <title>Test Traductions - Calypso Bay</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        min-height: 100vh;
      }
      .container {
        background: rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .language-selector {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 8px;
        padding: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      .language-selector select {
        border: none;
        background: transparent;
        font-size: 14px;
        font-weight: 600;
        color: #374151;
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 4px;
      }
      h1 {
        text-align: center;
        margin-bottom: 30px;
        font-size: 2.5em;
      }
      .test-section {
        margin: 20px 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .test-section h3 {
        margin-top: 0;
        color: #ffd700;
      }
      .status {
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
        font-weight: bold;
      }
      .status.success {
        background: rgba(34, 197, 94, 0.2);
        border: 1px solid rgba(34, 197, 94, 0.5);
      }
      .status.error {
        background: rgba(239, 68, 68, 0.2);
        border: 1px solid rgba(239, 68, 68, 0.5);
      }
      .status.info {
        background: rgba(59, 130, 246, 0.2);
        border: 1px solid rgba(59, 130, 246, 0.5);
      }
      button {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 5px;
      }
      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }
      .translation-example {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        border-left: 4px solid #ffd700;
      }
    </style>
  </head>
  <body>
    <!-- Sélecteur de langue -->
    <div class="language-selector">
      <select id="language-selector">
        <option value="fr">🇫🇷 Français</option>
        <option value="en">🇬🇧 English</option>
        <option value="de">🇩🇪 Deutsch</option>
      </select>
    </div>

    <div class="container">
      <h1 id="page-title">Test du Système de Traductions</h1>

      <div class="test-section">
        <h3>📋 Statut du Système</h3>
        <div id="system-status" class="status info">Initialisation...</div>
      </div>

      <div class="test-section">
        <h3>🌍 Test des Traductions</h3>
        <div id="translation-status" class="status info">En attente...</div>

        <div class="translation-example">
          <strong>Titre de la page :</strong> <span id="title-example">-</span>
        </div>

        <div class="translation-example">
          <strong>Bannier :</strong> <span id="banner-example">-</span>
        </div>

        <div class="translation-example">
          <strong>Bouton :</strong> <span id="button-example">-</span>
        </div>
      </div>

      <div class="test-section">
        <h3>🧪 Tests Interactifs</h3>
        <button onclick="testTranslation('fr')">Test Français</button>
        <button onclick="testTranslation('en')">Test English</button>
        <button onclick="testTranslation('de')">Test Deutsch</button>
        <button onclick="testAllTranslations()">Test Complet</button>
      </div>

      <div class="test-section">
        <h3>📊 Informations Techniques</h3>
        <div id="tech-info" class="status info">
          <strong>Langue actuelle :</strong> <span id="current-lang">-</span
          ><br />
          <strong>Traductions chargées :</strong>
          <span id="translations-loaded">-</span><br />
          <strong>Navigateur :</strong> <span id="browser-info">-</span>
        </div>
      </div>
    </div>

    <script src="assets/js/translations.js"></script>
    <script>
      let currentLang = 'fr'
      let translationsReady = false

      // Fonction pour mettre à jour le statut
      function updateStatus(elementId, message, type = 'info') {
        const element = document.getElementById(elementId)
        element.textContent = message
        element.className = `status ${type}`
      }

      // Fonction pour tester une traduction spécifique
      function testTranslation(lang) {
        if (!translationsReady) {
          updateStatus(
            'translation-status',
            '❌ Traductions non chargées',
            'error'
          )
          return
        }

        try {
          const t = window.translations[lang]['annuler-reservation']
          const common = window.translations[lang].common

          // Mettre à jour les exemples
          document.getElementById('title-example').textContent = t.title
          document.getElementById('banner-example').textContent =
            t.banner.description
          document.getElementById('button-example').textContent =
            t.banner.button

          // Mettre à jour le titre de la page
          document.title = t.title
          document.getElementById('page-title').textContent = t.title

          currentLang = lang
          updateStatus(
            'translation-status',
            `✅ Traductions ${lang} appliquées avec succès`,
            'success'
          )
          updateStatus('current-lang', lang, 'success')
        } catch (error) {
          updateStatus(
            'translation-status',
            `❌ Erreur lors de la traduction ${lang}: ${error.message}`,
            'error'
          )
        }
      }

      // Fonction pour tester toutes les traductions
      function testAllTranslations() {
        const languages = ['fr', 'en', 'de']
        let allGood = true
        let results = []

        languages.forEach((lang) => {
          try {
            const t = window.translations[lang]['annuler-reservation']
            if (t && t.title && t.banner && t.form) {
              results.push(`✅ ${lang.toUpperCase()}`)
            } else {
              results.push(`❌ ${lang.toUpperCase()}`)
              allGood = false
            }
          } catch (error) {
            results.push(`❌ ${lang.toUpperCase()}`)
            allGood = false
          }
        })

        const message = results.join(' | ')
        updateStatus(
          'translation-status',
          message,
          allGood ? 'success' : 'error'
        )
      }

      // Initialiser les traductions
      window.addEventListener('translations:ready', function (event) {
        const detectedLang = event.detail.language
        translationsReady = true

        updateStatus(
          'system-status',
          '✅ Système de traductions initialisé avec succès',
          'success'
        )
        updateStatus('translations-loaded', 'Oui', 'success')
        updateStatus('current-lang', detectedLang, 'success')

        // Appliquer la langue détectée
        testTranslation(detectedLang)
      })

      // Gérer le changement de langue
      document.addEventListener('DOMContentLoaded', function () {
        const languageSelector = document.querySelector('#language-selector')
        if (languageSelector) {
          languageSelector.addEventListener('change', function () {
            const newLang = this.value
            testTranslation(newLang)

            // Sauvegarder la préférence
            localStorage.setItem('calypso-bay-lang', newLang)
          })

          // Charger la préférence sauvegardée
          const savedLang = localStorage.getItem('calypso-bay-lang')
          if (savedLang && ['fr', 'en', 'de'].includes(savedLang)) {
            languageSelector.value = savedLang
            if (translationsReady) {
              testTranslation(savedLang)
            }
          }
        }

        // Informations techniques
        updateStatus('browser-info', navigator.userAgent.split(' ')[0], 'info')
      })

      // Vérifier l'état des traductions
      setTimeout(() => {
        if (!translationsReady) {
          updateStatus(
            'system-status',
            '❌ Erreur : Traductions non chargées dans les 5 secondes',
            'error'
          )
          updateStatus(
            'translation-status',
            "❌ Le fichier translations.js n'a pas été chargé correctement",
            'error'
          )
        }
      }, 5000)
    </script>
  </body>
</html>
